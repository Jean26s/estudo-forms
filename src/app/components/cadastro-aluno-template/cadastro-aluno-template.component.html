<form #form="ngForm" (ngSubmit)="onSubmit()" class="container my-5">

    <div class="mb-3">
      <label for="nome" class="form-label">Nome Completo</label>
      <input type="text" class="form-control" id="nome"
      name="nome"
      [ngClass]="{
        'is-valid':nome.valid,
        'is-invalid':nome.invalid &&nome.touched
      }"
      [(ngModel)]="aluno.nome"
      minlength="8"
      #nome="ngModel"
      required>
      <div *ngIf="nome.touched && nome.invalid" class="invalid-feedback">
        Nome é invalido
      </div>
      <div *ngIf="nome.valid" class="valid-feedback">
        Tudo certo!

      </div>
      </div>
      
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input id="email" type="email" class="form-control"
        name="email"
        #email="ngModel"
        [ngClass]="{
            'is-valid':email.valid,
            'is-invalid':email.invalid && email.touched
        }"
        [(ngModel)]="aluno.email"
        required>
        <div *ngIf="email.touched && email.invalid" class="invalid-feedback">
            Email é invalido
          </div>
          <div *ngIf="email.valid" class="valid-feedback">
            Tudo certo!
          </div>
      </div>

    <div class="mb-3">
      <label for="descricao" class="form-label">Descrição do aluno</label>
      <textarea class="form-control" id="descricao" rows="3"
      name="descricao"
      [(ngModel)]="aluno.descricao"
      #descricao="ngModel"
      [ngClass]="{
        'is-valid':descricao.valid,
        'is-invalid':descricao.invalid && descricao.touched
    }"
      minlength="30"
      maxlength="140"
      required></textarea>
      <div *ngIf="descricao.touched && descricao.invalid" class="invalid-feedback">
        <div *ngIf="descricao.errors?.['required']">Descrição obrigatoria</div>
        <div *ngIf="descricao.errors?.['minlength']">Escreva no minimo 30 caracteres</div>
      </div>
      <div *ngIf="descricao.valid" class="valid-feedback">
        Tudo certo!
      </div>
    </div>

    <div class="mb-3">
        <label for="nivel" class="form-label">Nivel de ensino</label>
        <select id="nivel" class="form-select"
        name="nivel"
        [(ngModel)]="aluno.nivel"
        required=""
        #nivel="ngModel"
        [ngClass]="{
            'is-valid':nivel.valid,
            'is-invalid':nivel.invalid && nivel.touched
        }">
        

            <option selected disabled value="">Selecione um nivel</option>
            <option selected value="1">Ensino Fundamental I</option>
            <option selected value="2">Ensino Fundamental II</option>
            <option selected value="3">Ensino Médio</option>
        </select>
        <div *ngIf="nivel.touched && nivel.invalid" class="invalid-feedback">
            Selecione um nivel 
          </div>
          <div *ngIf="nivel.valid" class="valid-feedback">
            Tudo certo!
          </div>
    </div>

    <div class="mb-3">
        <div class="form-check">
            <input
            class="form-check-input"
            type="checkbox"
            name="usuario-sistema"
            id="usuario-sistema"
            [(ngModel)]="aluno.usuarioAtivo">
            <label class="form-check-label" for="usuario-sistema">Usuario do sistema? </label>
        </div>
    </div>

    <div class="mb-3" *ngIf="aluno.usuarioAtivo">
        <label for="senha" class="form-label">Senha</label>
        <input id="senha" type="password" class="form-control"
        name="senha"
        [(ngModel)]="aluno.senha"
        required>
    </div>

    <div class="mb-3">
        <label for="cidade" class="form-label">Cidade</label>
        <input id="cidade" type="text" class="form-control"
        name="cidade"
        [(ngModel)]="aluno.endereco.cidade"
        required
        #cidade="ngModel"
        [ngClass]="{
            'is-valid':cidade.valid,
            'is-invalid':cidade.invalid && cidade.touched
        }"
        >
        <div *ngIf="cidade.touched && cidade.invalid" class="invalid-feedback">
            Descrição é invalido
          </div>
          <div *ngIf="cidade.valid" class="valid-feedback">
            Tudo certo!
          </div>
    </div>

    <div class="mb-3">
        <label for="estado" class="form-label">Estado</label>
        <input id="estado" type="text" class="form-control"
        name="estado"
        [(ngModel)]="aluno.endereco.estado"
        required
        minlength="2"
        maxlength="2"
        #estado="ngModel"
        [ngClass]="{
            'is-valid':estado.valid,
            'is-invalid':estado.invalid && estado.touched
        }">

        <div *ngIf="estado.touched && estado.invalid" class="invalid-feedback">
            Descrição é invalido
          </div>
          <div *ngIf="estado.valid" class="valid-feedback">
            Tudo certo!
          </div>
    </div>

    <button [disabled]="form.invalid" type="submit" class="btn btn-primary">Enviar</button>
</form>